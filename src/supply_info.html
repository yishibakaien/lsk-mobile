<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>供应信息</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="font/font.css">
    <link rel="stylesheet" href="./css/common/reset.css">
    <link rel="stylesheet" href="./css/common/common.css">
    <link rel="stylesheet" href="./css/supply_info.css">
    <link rel="stylesheet" href="js/utils/swiper/swiper.min.css">
    <script src="js/utils/swiper/swiper.min.js"></script>
</head>

<body>
    <div class="head-wrapper">
        <div class="head">
            <div class="left">
                <a class="icon-fanhui" href="personal_center.html"></a>
            </div>
            <div class="center">供应信息</div>
            <div class="right"><a href="./publish_supply.html" id="headRightText">发布供应</a></div>
        </div>
    </div>
    <div class="swiper-tag border-bottom">
        <div class="text"><span class="active">商家供应</span></div>
        <div class="text"><span>买家求购</span></div>
    </div>
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="item">
                    <div class="avatar-wrapper border-bottom">
                        <img src="images/big_avatar.png">
                        <div>HM</div>
                    </div>
                    <div class="product-info">
                        <img src="images/product.png">
                        <div class="text">
                            <div class="brief">靓丽弹力6公分平板花边</div>
                            <div class="type">胚布</div>
                            <div class="time">11小时前</div>
                        </div>
                    </div>
                </div>
                <div class="item">
                    <div class="avatar-wrapper  border-bottom">
                        <img src="images/avatar.png">
                        <div>HM</div>
                    </div>
                    <div class="product-info">
                        <img src="images/product.png">
                        <div class="text">
                            <div class="brief">靓丽弹力6公分平板花边</div>
                            <div class="type">胚布</div>
                            <div class="time">11小时前</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item">
                    <div class="avatar-wrapper border-bottom">
                        <img src="images/avatar.png">
                        <div>HM</div>
                    </div>
                    <div class="product-info">
                        <img src="images/product.png">
                        <div class="text">
                            <div class="brief">需要有货的，要一样，如有请联系</div>
                            <div class="status">求购中</div>
                            <div class="time">11小时前</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var text = [
            {
                text: '发布供应',
                link: './publish_supply.html'
            },
            {
                text: '发布求购',
                link: './publish_buying.html'
            }
        ];
//        console.log(text[0].link);
        var headRightText = document.getElementById('headRightText');
        var swiperTag = document.getElementsByClassName('swiper-tag')[0].getElementsByTagName('span');
        var contentSwiper = new Swiper ('.swiper-container', {
            onSlideChangeEnd: swiperControl
            });
        slideControl();

        function slideControl() {
            for (var i = 0; i < swiperTag.length; i++) {
                (function(i) {
                    swiperTag[i].addEventListener('click', function() {
                        contentSwiper.slideTo(i, 300, false);
                        swiperControl(contentSwiper);
                    }, false);
                })(i);
            }
        }

        function swiperControl(swiper) {
            for (var i = 0; i < swiperTag.length; i++) {
                swiperTag[i].className = swiperTag[i].className.replace('active', '');
            }
            swiperTag[swiper.activeIndex].className += ' active';
            headRightText.innerHTML = text[swiper.activeIndex].text;
            headRightText.setAttribute('href', text[swiper.activeIndex].link);
        }
    </script>
</body>

</html>